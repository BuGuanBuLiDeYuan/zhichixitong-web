// 章节数据类型定义
export type Chapter = {
    id: string;
    slug: string;
    title: string;
    content: string;
    excerpt: string;
    readTime: number;
    tags: string[];
};

// 默认章节数据，在无法加载chapters.json时使用
const defaultChapters: Chapter[] = [
    {
        id: "008",
        slug: "008-探索自我支持系统：你拥有的比你想像的多——跳出边际思维",
        title: "探索自我支持系统：你拥有的比你想像的多——跳出边际思维",
        content: "\n\n每个人自己就是自己最大的支持系统，对于外界，大家的支持比想像的多\n\n我想现在已经能理解，但对于自己，为啥拥有的也比想像的多呢 \n\n因为我们不自觉的应用了边际思维，你比别人多的才叫有 \n\n比如我问你的语言能力怎么样，你可能会说我英语怎么样，法语德语怎么样，而默认把自己的母语给忽略了 \n\n对啊，在中国，会中文这也算个能力？ \n\n从边际角度看，人人都会，所以就不算，边际量为0 嘛，但跳出边际思维，你就会发现全世界只有 20%不到的人会中文，这妥妥是个能力 \n\n如果你会本地方言，这又是一个能力了 \n\n但谁会觉得会说天津话、广东话跟英语一样是能力呢？ \n\n但跳出边际思维，你就会知道，这完全是一样的，法语德语在欧洲也就相当于河南话陕西话在中国，欧洲人开会，各讲各的，还能达成交流，跟中国人天南地北各说各的也能懂是一样的 \n\n如果你是个年轻人，那你甚至拥有绝对珍贵的财富，就是年轻本身，多少有钱的老人愿意花所有的钱换回年轻的身体，可惜做不到 \n\n《赌王何鸿燊天价治疗费曝光，每天花 86万续命10年》 而他所做的续命，也不可能回到年轻的状态，所以对他来说，每天花 86万都不可能体验一天 20岁的日子了 \n\n如果你要比别人多才算拥有，那你在意的必然是自己所欠缺的，这是一种很隐蔽的思维方式，让我们专注于自己没有的而忽略掉已经有的 \n\n但走上社会我们才发现，你拥有的才决定了你是谁 \n\n在考试的时候，我们重要的是查漏补缺，一个知识点不会可能就少几分，多几个知识点不会就差很远了 \n\n但在社会上，你可以数学 0 分，英语0 分，语文也0 分，只要有做直播的天赋，你就可以比一个省状元赚的更多 \n\n你拥有的才定义了你，而不是你没有的 \n\n只要跳出边际思维，每个人都列出一长串自己的资源和能力，比如我会说南昌话，还会分辨一些野菜，野生菌和野果，一些常见的绿化植物 \n\n虽然这些技能似乎很难变成收益，但我确确实实的拥有这些能力 \n\n而任何一种看似无用的能力，都有人愿意花很多钱拥有 \n\n生活在杭州的人不会每天去看西湖，就如同生活在北京的不会每天去看长城，但并不影响杭州人会花钱去北京看长城，而北京人会花钱来杭州看西湖 \n\n你看，在本地并不重要的技能和体验，总是有别人愿意花钱来买的 \n\n每个人都足够有趣，哪怕一个看似很无趣的人，在自己熟悉的领域，也一定可以给人滔滔不绝的讲上三天三夜 \n\n当我们说一个小孩学习差的时候，肯定是说他学校的成绩不好，而不是说他学奥特曼卡片的能力不行，但实际上，他可能玩这个是最棒的 \n\n但直接给他盖一个学习不行的戳，似乎只有某些东西的学习才叫学习，而另外的技能根本不叫学习，这是完全不公平的\n\n手工耿在学校一定是让老师头疼的孩子，但谁又能否认他的才华呢？ \n\n一个人的聪明，表现是多元的，我们的评价标准太单一，而未来的社会，这些标准能一直维持吗？",
        excerpt: "每个人自己就是自己最大的支持系统，对于外界，大家的支持比想像的多\n\n我想现在已经能理解，但对于自己，为啥拥有的也比想像的多呢",
        readTime: 5,
        tags: ["理论", "入门"]
    },
    {
        id: "068",
        slug: "068-想有大成就者，早点破产是好事",
        title: "想有大成就者，早点破产是好事",
        content: "# 想有大成就者，早点破产是好事\n\n \n昨天有个朋友跟说我年轻的时候早点亏光是好事，下面是我们对话原文： \n以前没钱的时候归零几次还是挺有帮助的 \n他： \n归零是真的痛苦 \n以前就一万块钱 \n归零了我饭都吃不下 \n我： \n是的 \n年轻的时候多经历是好事，只不过当时别人这么说肯定觉得站着说话不腰\n疼 \n他： \n经验真的都是亏出来的 \n \n生命是一场伟大的冒险，而你又想成为其中最优秀最有成就的那一批，又\n必然要冒更大的多的险 \n\n读历史，经常觉得这些古代帝王确实也有点气运在身上，但凡有点差错，\n早就没了 \n在《后出师表》中，诸葛亮这么描述曹操： \n曹操智计，殊绝于人，其用兵也，仿怫孙、吴，然困于南阳，险于乌巢，\n危于祁连，逼于黎阳，几败北山，殆死潼关，然后伪定一时耳 \n曹操五攻昌霸不下，四越巢湖不成，任用李服而李服图之，委任夏侯而夏\n侯败亡，先帝每称操为能，犹有此失 \n \n其实这还只是曹操有所成就之后遭遇的失败，一开始的时候也是草台班\n子，在三国志裴注中引魏书有这么一段： \n兵谋叛，夜烧太祖帐，太祖手剑杀数十人，馀皆披靡，乃得出营；其不叛\n者五百馀人。 \n \n这种变起肘腋才最是难防，后面张绣又差点要了他的命 \n \n像这种故事，随便读哪个朝代的高祖本纪都能看到一堆，总之，没有谁是\n得天下如唾掌的，即使是号称史上最容易的隋文帝杨坚，也屡次被他女婿北周\n宣帝宇文赟猜忌，每天战战兢兢的活着 \n \n\n孟子那段"故天将降大任于是人也，必先苦其心志，劳其筋骨，饿其体肤，\n空乏其身，行拂乱其所为，所以动心忍性，曾益其所不能"我们都是从小学过\n的，但大多数人真的面对生命中的苦难时，都只会惊慌失措，不知进退 \n \n在这里，我并没有说人应该去感谢苦难，但苦难这玩意儿是不以人的意志\n为转移的，人这一生总是要经历一些苦难，这个时候应该用毛委员的革命乐观\n主义，战略上藐视敌人，战术上重视敌人 \n战略上不藐视，在重压下动作就会变形，变成逃跑主义，碰上问题就逃\n跑，那肯定不行。战术上不重视，那就容易在与苦难对抗的时候失败，不能战\n胜困难而为困难所战胜，那也不行 \n当我们说苦难是一笔财富的时候，肯定说的是已经熬过去，已经战胜了的\n苦难，就跟古代的大将军都要夸耀对手一样，这样才显的自己成就更大，如果\n你熬不过，被苦难打的丢盔弃甲，那肯定没办法来说这句话 \n就如同只有赢家才能宽恕敌人一样，有机会报仇而你不报，化干戈为玉\n帛，你是好样的，你是和平主义者，你被敌人打到要投降，说我们别打了，要\n和平，那是城下之盟，是被逼求和，往好一点说也只是忍辱偷生，徐图复兴 \n \n如果你年纪轻轻就破产了，那你说拿这个宽慰你也好，真的信也罢，总\n之，哪套理论能让你重新振作，重新面对稀碎的生活，那就是好的 \n\n支持系统本身不是玄学，不是宗教，而当支持系统用于自身的时候，你可\n以向宗教、玄学寻求支持，只要能让你恢复状态，求神拜佛也没问题 \n但如果你是个无神论者，没办法用这套说服自己，那你就看看这篇，来缓\n解一下你的焦虑 \n \n日后，如果你真的有所成就，这个时候你也可以高姿态云淡风轻的讲讲过\n去自己有多难了 \n真正过难受日子的是没办法讲的，要讲也是声泪俱下的来讲 \n   \n",
        excerpt: "昨天有个朋友跟说我年轻的时候早点亏光是好事，下面是我们对话原文",
        readTime: 7,
        tags: ["方法论", "分析"]
    },
    {
        id: "105",
        slug: "105-如果你学的不够好，试试教别人",
        title: "如果你学的不够好，试试教别人",
        content: "# 如果你学的不够好，试试教别人\n\n教学相长也是老话了，但很少有人实践 \n我一直觉得教高中数学的应该是刚考上名校的大学生，他们真正从题海练\n出来。而大学里玩了四年的师范生，已经离高中很远了，他们再去教，相当于\n重新学一遍 \n \n有个理论，书本最多只能记录信息的30%，手把手可以到达 70%，因为很\n多东西语言根本无法传递 \n就比如没有人可以通过书本学会骑自行车，游泳，攀岩，也没有人可以通\n过书本变的更自信，更勇敢，更智慧。尽管书上写的都是对的，但只有在实践\n中，你才知道原来这么多内容根本没有写，写了也不会 \n你要理解递归，你先要理解递归 \n如果你理解递归，你就知道上面这句话是对的，如果你不理解递归，那看\n了也肯定是一头雾水 \n \n昨天跟朋友聊，他跟着教程学习，前面几步教程上都是一带而过，而他折\n腾了一下午，因为教程里有连接github，而他不知道怎么注册 \n教程的写作者肯定也没想到这居然是个问题，怎么会有人没有 github 呢？\n但对于初学者来说，这都是问题 \n\n对于老师傅，他看到的是一条笔直的路，他告诉你直接走就行了，半小时\n就到，而对于新人，他看到的是一条波浪起伏看不到头的路，他根本不知道路\n上会碰到什么 \n我们都有一个体验，同样一条路，往回走总是比去的时候感觉更近，这就\n是一样的道理。当你有过经验了，就知道哪里有问题，或者你担心的问题根本\n不是问题，而你没有经验的时候，每一个点都可能有问题 \n \n所以教别人也是一种学习，而且是更有效的学习。无论你学了多少，当你\n去教的时候，你都会发现自己原来也学到了一些，同时也有很多搞不明白 \n程序员们有一种小黄鸭方法，就是在桌上放一只小黄鸭，然后给小黄鸭讲\n自己刚写的代码，如果自己能讲明白，那就意味着这段代码大概率没啥问题，\n如果自己都讲不明白，那肯定有 bug \n \n所谓换位思考其实也是一种通过教育来学习的方法，当你是父母的时候，\n你总想教育孩子，而当你是孩子的时候，又总想教育父母，那不如换个个儿，\n让父母当孩子，孩子当父母。父母想尽办法替孩子辩护，孩子想办法替父母说\n理，说着说着，是不是就理解了双方的不容易，原来爱一直都在，只是大家都\n只站在自己的方寸天地里看不到对方的世界 \n一个调皮的孩子，让他上课讲题，或者不讲题讲怎么打游戏，他就会知道\n课堂上说话的孩子是多么让老师厌恶 \n \n\n大家都觉得已经烂熟于胸才可以教别人，但真正的大师已经把所有的弯路\n都走遍了，甚至弯路他也可以当直路走，这对于新人是很难把握的，让刚学一\n点的人来教其他人，虽然讲的不够深，但也能浅显很多 \n同时，让讲解者发现自己原来还是比别人多懂一些的，自信就油然而生了 \n我一直是这个观点，自信不是要求出来的，是在一步步成功经验中生长出\n来的 \n对于一个 5 个月大的孩子门槛是无法翻越的天堑，而到了三岁，他就不会\n觉得有多难了，因为他已经长大了一点 \n \n孟子说人之患在好为人师，但其实好为人师有什么错呢？只要你教的是对\n的，好为人师就是想让别人学更多的东西，这是帮助别人的好事啊 \n很多人学习的目的是为了在人前炫耀显摆，这个立意不能说好，但只要能\n让他学习，最终就是好的，就如同也许你学习的目的不是为了振兴祖国，而是\n为了泡妞，但最终你学进去了就行啊 \n支持系统的实践是很灵活的，每个人都可以有自己的办法，只要最终让自\n己更优秀更善良更成功，那就 OK \n   \n",
        excerpt: "# 如果你学的不够好，试试教别人  教学相长也是老话了，但很少有人实践  我一直觉得教高中数学的应该是刚考上名校的大学生，他们真正从题海练 出来。而大学里玩了四年的师范生，已经离高中很远了，他们再去教，相当于 重新学一遍    有个理论，书本最多只能记录信息的30%，手把手可以到达 70%，因为很 ...",
        readTime: 6,
        tags: ["实践", "策略"]
    },
    {
        id: "018",
        slug: "018-很多人认可你的价值，找到他们",
        title: "很多人认可你的价值，找到他们",
        content: "# 很多人认可你的价值，找到他们\n\n如果你实在发现不了身边人对你的支持，或者他们并不理解你所做的事\n情，那你需要的是拓展自己的圈子，寻找认可你的人 \n   \n",
        excerpt: "如果你实在发现不了身边人对你的支持，或者他们并不理解你所做的事 情，那你需要的是拓展自己的圈子，寻找认可你的人      ...",
        readTime: 3,
        tags: [
            "其他"
        ]
    },
    {
        id: "082",
        slug: "082-天下之至拙，能破天下之至巧",
        title: "天下之至拙，能破天下之至巧",
        content: "# 天下之至拙，能破天下之至巧\n\n人世间的争斗，多是以巧胜拙，可是你看很多高人却又追求以拙破巧，比\n如儒家讲不诚无物，对自己要诚，对别人也要诚，而道家讲大巧若拙，大辩若\n讷  \n在曾国藩家书中，有这么一段： \n纵人以巧诈来，我仍以浑含应之，以诚愚应之；久之，则人之意也消。 若\n勾心斗角，迎相距，则报复无已时耳 \n \n在支持系统中，我们也追求以拙破巧 \n我们为什么支持别人，因为别人支持我们，我们惭愧之前疏于表达，所以\n我们要弥补 \n如果支持系统越深入，越靠近内圈，就越是需要爱与支持本身来驱动，越\n靠近外圈，则利益与套路越多一些 \n但能从圈外走到圈内的，靠的也依然是爱与信任，如果单纯是利益驱动，\n那一旦有别人给的利益更大于你，他立马就会远离甚至翻脸，你又怎么放心让\n这样的人进入你的内圈呢？ \n \n曾国藩的那段我觉得讲的很好，如果别人跟你玩套路，你也又套路回应，\n那你们总是互相猜忌，双方的心力都用在勾心斗角上了，最后估计也没有谁是\n\n真正的赢家，大家都只是浪费时间。不如直接表达自己的态度，能契合的，大\n家可以进一步深入了解，不能契合的，大家就此别过，节约时间 \n曾国藩出了名的就是结硬寨打呆仗，不跟你玩什么奇兵兵法，就一点点推\n过去，靠着列国支持的洋枪洋炮一点点扭转跟了太平军的差距，最后终于获\n胜。 \n \n国共相争的历史，大家都知道共产党的主张简单说就是打土豪分田地，所\n有人都知道共产党追求的是这个目标，而国民党的目标就虚的多了，虽然也有\n简单的解释，就是民有民治民享，但相对来说，就不如打土豪分田地这样言简\n意赅，直指人心 \n这背后的斗争自然是各凭本事，机巧无穷，但究到底，还是二者价值观之\n间的战争。共产党走到一处，就在一处进行土地革命，给穷人分配土地，所以\n共产党军队越打越强大，人越多。从这个角度讲，共产党的胜利是历史的选\n择，没有什么问题 \n \n再往前，孙中山先生搞革命的时候，也直接打出了驱除鞑虏，恢复中华的\n口号。 \n越是简单的口号与目标，越容易团结同志和吸引外部力量 \n很多人羞于表达自己的观点，怕得罪人，但还是那句话，除非你的工作性\n质不允许，大多数情况下，你的态度表达的越直接，你越能快速的区分你的支\n\n持系统。当然，大多数事情上，没有那么明确的是非，也不需要在每件事情上\n表态，但涉及你的核心利益与价值观，表达的越清晰越好，越早越好 \n \n对于支持系统的外圈，直接谈利比较好，而对于内圈，则需要多进行爱的\n表达。但说到底，还是爱来主导，因为人不可能一直靠利益维持支持，最后还\n是感情和价值观才能让一个人几十年都能来支持你 \n这些都不需要太多的技巧，只需要多进行爱的表达，这就是以拙胜巧 \n   \n",
        excerpt: "# 天下之至拙，能破天下之至巧  人世间的争斗，多是以巧胜拙，可是你看很多高人却又追求以拙破巧，比 如儒家讲不诚无物，对自己要诚，对别人也要诚，而道家讲大巧若拙，大辩若 讷   在曾国藩家书中，有这么一段：  纵人以巧诈来，我仍以浑含应之，以诚愚应之；久之，则人之意也消。 若 勾心斗角，迎相距，则报复无已时耳...",
        readTime: 5,
        tags: [
            "支持系统",
            "职业发展"
        ]
    },
];

// 正确加载章节数据
function loadChaptersData() {
    try {
        // 尝试从chapters.json加载数据
        if (typeof window !== 'undefined') {
            // 客户端环境
            import('/public/data/chapters.json')
                .then(data => {
                    if (data && Array.isArray(data.default)) {
                        chaptersData = data.default;
                        console.log(`成功加载${chaptersData.length}篇文章`);
                    }
                })
                .catch(error => {
                    console.error('客户端加载章节数据失败:', error);
                });
        } else {
            // 服务器环境
            try {
                const data = require('../public/data/chapters.json');
                if (data && Array.isArray(data)) {
                    chaptersData = data;
                    console.log(`成功加载${chaptersData.length}篇文章`);
                }
            } catch (error) {
                console.error('服务器加载章节数据失败:', error);
            }
        }
    } catch (error) {
        console.error('加载章节数据失败，使用默认数据:', error);
    }
}

// 在模块初始化时加载数据
loadChaptersData();

// 获取所有章节
export function getAllChapters(): Chapter[] {
    return chaptersData;
}

// 获取特定章节的数据
export function getChapterById(id: string): Chapter | null {
    return chaptersData.find(chapter => chapter.id === id) || null;
}

// 获取所有标签和对应的章节ID
export function getAllTags(): Record<string, string[]> {
    return tagsData;
}

// 获取随机章节（不重复）
export function getRandomChapters(count: number = 3): Chapter[] {
    const shuffled = [...chaptersData].sort(() => 0.5 - Math.random());
    return shuffled.slice(0, count);
}

// 根据标签获取章节
export function getChaptersByTag(tag: string): Chapter[] {
    const chapterIds = tagsData[tag] || [];
    return chaptersData.filter(chapter => chapterIds.includes(chapter.id));
}

// 搜索章节
export function searchChapters(query: string): Chapter[] {
    if (!query || query.trim() === '') {
        return [];
    }

    const normalizedQuery = query.toLowerCase().trim();
    return chaptersData.filter(chapter =>
        chapter.title.toLowerCase().includes(normalizedQuery) ||
        chapter.content.toLowerCase().includes(normalizedQuery)
    );
} 